# frozen_string_literal: true

require_relative '../../../lib/japanese_address_parser/address_parser/town_and_after_normalizer'

::RSpec.describe ::JapaneseAddressParser::AddressParser::TownAndAfterNormalizer do
  describe '.call' do
    context '旧字体を含むとき' do
      it '新字体に置き換える' do
        # テスト駆動の実装をしやすくするために、本体とは旧・新字体の定義を分けておく。
        expect(described_class.call('北亞4-14-17')).to eq '北亜4-14-17'
        expect(described_class.call('南圍4-15-18')).to eq '南囲4-15-18'
        expect(described_class.call('西壹6-16-16')).to eq '西壱6-16-16'
        expect(described_class.call('北榮4-16-6')).to eq '北栄4-16-6'
        expect(described_class.call('東驛1-3-4')).to eq '東駅1-3-4'
        expect(described_class.call('西應3-19-2')).to eq '西応3-19-2'
        expect(described_class.call('南櫻4-14-5')).to eq '南桜4-14-5'
        expect(described_class.call('假3-10-16')).to eq '仮3-10-16'
        expect(described_class.call('東會2-3-3')).to eq '東会2-3-3'
        expect(described_class.call('東懷4-12-20')).to eq '東懐4-12-20'
        expect(described_class.call('西覺4-9-10')).to eq '西覚4-9-10'
        expect(described_class.call('東樂1-11-19')).to eq '東楽1-11-19'
        expect(described_class.call('北陷2-11-8')).to eq '北陥2-11-8'
        expect(described_class.call('東歡4-12-2')).to eq '東歓4-12-2'
        expect(described_class.call('氣5-2-9')).to eq '気5-2-9'
        expect(described_class.call('北戲1-15-14')).to eq '北戯1-15-14'
        expect(described_class.call('東據4-8-10')).to eq '東拠4-8-10'
        expect(described_class.call('北挾1-9-15')).to eq '北挟1-9-15'
        expect(described_class.call('東區5-3-10')).to eq '東区5-3-10'
        expect(described_class.call('東徑4-4-6')).to eq '東径4-4-6'
        expect(described_class.call('西溪2-14-13')).to eq '西渓2-14-13'
        expect(described_class.call('南輕6-11-14')).to eq '南軽6-11-14'
        expect(described_class.call('藝2-10-14')).to eq '芸2-10-14'
        expect(described_class.call('西儉2-1-2')).to eq '西倹2-1-2'
        expect(described_class.call('東圈5-8-18')).to eq '東圏5-8-18'
        expect(described_class.call('東權4-19-5')).to eq '東権4-19-5'
        expect(described_class.call('西嚴3-16-5')).to eq '西厳3-16-5'
        expect(described_class.call('北恆5-5-12')).to eq '北恒5-5-12'
        expect(described_class.call('北國2-19-9')).to eq '北国2-19-9'
        expect(described_class.call('南齋5-1-5')).to eq '南斎5-1-5'
        expect(described_class.call('北雜2-3-18')).to eq '北雑2-3-18'
        expect(described_class.call('蠶3-20-5')).to eq '蚕3-20-5'
        expect(described_class.call('北殘2-19-5')).to eq '北残2-19-5'
        expect(described_class.call('東兒3-1-12')).to eq '東児3-1-12'
        expect(described_class.call('北實3-2-15')).to eq '北実3-2-15'
        expect(described_class.call('東釋4-8-3')).to eq '東釈4-8-3'
        expect(described_class.call('南從6-6-10')).to eq '南従6-6-10'
        expect(described_class.call('縱4-20-9')).to eq '縦4-20-9'
        expect(described_class.call('西敍2-8-15')).to eq '西叙2-8-15'
        expect(described_class.call('西燒6-9-2')).to eq '西焼6-9-2'
        expect(described_class.call('西條6-14-3')).to eq '西条6-14-3'
        expect(described_class.call('西剩1-16-16')).to eq '西剰1-16-16'
        expect(described_class.call('東壤3-18-6')).to eq '東壌3-18-6'
        expect(described_class.call('釀6-2-16')).to eq '醸6-2-16'
        expect(described_class.call('東眞5-17-7')).to eq '東真5-17-7'
        expect(described_class.call('南盡2-3-14')).to eq '南尽2-3-14'
        expect(described_class.call('東醉1-3-3')).to eq '東酔1-3-3'
        expect(described_class.call('西髓6-16-6')).to eq '西髄6-16-6'
        expect(described_class.call('聲6-2-11')).to eq '声6-2-11'
        expect(described_class.call('竊6-19-6')).to eq '窃6-19-6'
        expect(described_class.call('淺5-5-8')).to eq '浅5-5-8'
        expect(described_class.call('南錢2-1-8')).to eq '南銭2-1-8'
        expect(described_class.call('禪4-6-4')).to eq '禅4-6-4'
        expect(described_class.call('北爭1-14-11')).to eq '北争1-14-11'
        expect(described_class.call('東插6-9-18')).to eq '東挿6-9-18'
        expect(described_class.call('騷6-15-18')).to eq '騒6-15-18'
        expect(described_class.call('屬2-16-14')).to eq '属2-16-14'
        expect(described_class.call('西對4-18-19')).to eq '西対4-18-19'
        expect(described_class.call('西滯1-15-6')).to eq '西滞1-15-6'
        expect(described_class.call('東擇1-17-5')).to eq '東択1-17-5'
        expect(described_class.call('單6-1-10')).to eq '単6-1-10'
        expect(described_class.call('斷4-5-18')).to eq '断4-5-18'
        expect(described_class.call('西癡6-18-6')).to eq '西痴6-18-6'
        expect(described_class.call('鑄3-3-13')).to eq '鋳3-3-13'
        expect(described_class.call('南敕6-18-9')).to eq '南勅6-18-9'
        expect(described_class.call('鐵2-3-15')).to eq '鉄2-3-15'
        expect(described_class.call('傳1-12-19')).to eq '伝1-12-19'
        expect(described_class.call('南黨1-3-13')).to eq '南党1-3-13'
        expect(described_class.call('西鬪6-7-16')).to eq '西闘6-7-16'
        expect(described_class.call('西屆1-14-15')).to eq '西届1-14-15'
        expect(described_class.call('東腦6-7-20')).to eq '東脳6-7-20'
        expect(described_class.call('南廢5-2-8')).to eq '南廃5-2-8'
        expect(described_class.call('東發6-4-4')).to eq '東発6-4-4'
        expect(described_class.call('南蠻6-9-13')).to eq '南蛮6-9-13'
        expect(described_class.call('南拂4-12-9')).to eq '南払4-12-9'
        expect(described_class.call('西邊2-18-13')).to eq '西辺2-18-13'
        expect(described_class.call('西瓣4-15-8')).to eq '西弁4-15-8'
        expect(described_class.call('寶2-15-20')).to eq '宝2-15-20'
        expect(described_class.call('西沒5-14-12')).to eq '西没5-14-12'
        expect(described_class.call('東滿5-10-5')).to eq '東満5-10-5'
        expect(described_class.call('藥3-18-4')).to eq '薬3-18-4'
        expect(described_class.call('北餘5-8-2')).to eq '北余5-8-2'
        expect(described_class.call('西樣3-14-2')).to eq '西様3-14-2'
        expect(described_class.call('北亂6-9-1')).to eq '北乱6-9-1'
        expect(described_class.call('東兩6-18-3')).to eq '東両6-18-3'
        expect(described_class.call('西禮4-5-13')).to eq '西礼4-5-13'
        expect(described_class.call('東靈3-14-14')).to eq '東霊3-14-14'
        expect(described_class.call('南爐6-5-20')).to eq '南炉6-5-20'
        expect(described_class.call('東灣6-3-15')).to eq '東湾6-3-15'
        expect(described_class.call('西惡6-9-5')).to eq '西悪6-9-5'
        expect(described_class.call('南醫2-16-14')).to eq '南医2-16-14'
        expect(described_class.call('南飮3-17-15')).to eq '南飲3-17-15'
        expect(described_class.call('北營3-17-16')).to eq '北営3-17-16'
        expect(described_class.call('南圓5-20-7')).to eq '南円5-20-7'
        expect(described_class.call('北歐1-5-15')).to eq '北欧1-5-15'
        expect(described_class.call('北奧1-16-14')).to eq '北奥1-16-14'
        expect(described_class.call('西價4-12-2')).to eq '西価4-12-2'
        expect(described_class.call('東繪4-3-19')).to eq '東絵4-3-19'
        expect(described_class.call('南擴3-3-8')).to eq '南拡3-3-8'
        expect(described_class.call('東學6-7-3')).to eq '東学6-7-3'
        expect(described_class.call('南罐2-7-17')).to eq '南缶2-7-17'
        expect(described_class.call('勸3-2-11')).to eq '勧3-2-11'
        expect(described_class.call('觀4-14-18')).to eq '観4-14-18'
        expect(described_class.call('歸3-5-14')).to eq '帰3-5-14'
        expect(described_class.call('南犧4-4-6')).to eq '南犠4-4-6'
        expect(described_class.call('東擧5-14-11')).to eq '東挙5-14-11'
        expect(described_class.call('西狹2-4-12')).to eq '西狭2-4-12'
        expect(described_class.call('西驅4-14-5')).to eq '西駆4-14-5'
        expect(described_class.call('莖4-5-11')).to eq '茎4-5-11'
        expect(described_class.call('北經6-13-16')).to eq '北経6-13-16'
        expect(described_class.call('東繼2-19-13')).to eq '東継2-19-13'
        expect(described_class.call('西缺5-9-12')).to eq '西欠5-9-12'
        expect(described_class.call('劍4-8-17')).to eq '剣4-8-17'
        expect(described_class.call('南檢6-9-3')).to eq '南検6-9-3'
        expect(described_class.call('西顯3-18-16')).to eq '西顕3-18-16'
        expect(described_class.call('北廣1-17-16')).to eq '北広1-17-16'
        expect(described_class.call('東鑛3-3-10')).to eq '東鉱3-3-10'
        expect(described_class.call('東碎6-10-8')).to eq '東砕6-10-8'
        expect(described_class.call('北劑3-14-3')).to eq '北剤3-14-3'
        expect(described_class.call('南參2-4-15')).to eq '南参2-4-15'
        expect(described_class.call('西慘3-17-2')).to eq '西惨3-17-2'
        expect(described_class.call('南絲6-15-9')).to eq '南糸6-15-9'
        expect(described_class.call('南辭4-18-11')).to eq '南辞4-18-11'
        expect(described_class.call('北舍3-7-11')).to eq '北舎3-7-11'
        expect(described_class.call('南壽1-7-2')).to eq '南寿1-7-2'
        expect(described_class.call('西澁4-16-5')).to eq '西渋4-16-5'
        expect(described_class.call('南肅5-4-8')).to eq '南粛5-4-8'
        expect(described_class.call('西將5-5-6')).to eq '西将5-5-6'
        expect(described_class.call('證3-11-1')).to eq '証3-11-1'
        expect(described_class.call('乘3-3-6')).to eq '乗3-3-6'
        expect(described_class.call('東疊2-12-15')).to eq '東畳2-12-15'
        expect(described_class.call('東孃5-14-14')).to eq '東嬢5-14-14'
        expect(described_class.call('觸4-15-7')).to eq '触4-15-7'
        expect(described_class.call('寢3-2-10')).to eq '寝3-2-10'
        expect(described_class.call('南圖3-17-2')).to eq '南図3-17-2'
        expect(described_class.call('南穗5-10-11')).to eq '南穂5-10-11'
        expect(described_class.call('東樞3-18-20')).to eq '東枢3-18-20'
        expect(described_class.call('西齊4-9-5')).to eq '西斉4-9-5'
        expect(described_class.call('南攝1-18-11')).to eq '南摂1-18-11'
        expect(described_class.call('西戰6-4-20')).to eq '西戦6-4-20'
        expect(described_class.call('北潛3-1-1')).to eq '北潜3-1-1'
        expect(described_class.call('東雙6-9-5')).to eq '東双6-9-5'
        expect(described_class.call('南莊5-11-8')).to eq '南荘5-11-8'
        expect(described_class.call('裝6-12-7')).to eq '装6-12-7'
        expect(described_class.call('北藏6-5-8')).to eq '北蔵6-5-8'
        expect(described_class.call('北續2-18-7')).to eq '北続2-18-7'
        expect(described_class.call('北體6-1-4')).to eq '北体6-1-4'
        expect(described_class.call('西臺5-12-8')).to eq '西台5-12-8'
        expect(described_class.call('南澤4-9-14')).to eq '南沢4-9-14'
        expect(described_class.call('西膽1-7-13')).to eq '西胆1-7-13'
        expect(described_class.call('北彈4-17-14')).to eq '北弾4-17-14'
        expect(described_class.call('北蟲6-6-19')).to eq '北虫6-6-19'
        expect(described_class.call('廳2-5-8')).to eq '庁2-5-8'
        expect(described_class.call('東鎭1-19-7')).to eq '東鎮1-19-7'
        expect(described_class.call('東點2-4-13')).to eq '東点2-4-13'
        expect(described_class.call('東燈2-2-12')).to eq '東灯2-2-12'
        expect(described_class.call('南盜6-17-8')).to eq '南盗6-17-8'
        expect(described_class.call('東獨2-1-7')).to eq '東独2-1-7'
        expect(described_class.call('東貳1-17-16')).to eq '東弐1-17-16'
        expect(described_class.call('東霸3-11-13')).to eq '東覇3-11-13'
        expect(described_class.call('北賣1-6-14')).to eq '北売1-6-14'
        expect(described_class.call('東髮2-13-2')).to eq '東髪2-13-2'
        expect(described_class.call('祕4-2-4')).to eq '秘4-2-4'
        expect(described_class.call('佛6-8-15')).to eq '仏6-8-15'
        expect(described_class.call('變3-5-20')).to eq '変3-5-20'
        expect(described_class.call('西辯6-7-2')).to eq '西弁6-7-2'
        expect(described_class.call('豐3-5-17')).to eq '豊3-5-17'
        expect(described_class.call('北飜1-4-15')).to eq '北翻1-4-15'
        expect(described_class.call('南默2-10-14')).to eq '南黙2-10-14'
        expect(described_class.call('西與4-2-17')).to eq '西与4-2-17'
        expect(described_class.call('北譽4-18-8')).to eq '北誉4-18-8'
        expect(described_class.call('西謠1-5-20')).to eq '西謡1-5-20'
        expect(described_class.call('覽6-20-2')).to eq '覧6-20-2'
        expect(described_class.call('獵5-10-3')).to eq '猟5-10-3'
        expect(described_class.call('東勵5-9-8')).to eq '東励5-9-8'
        expect(described_class.call('東齡4-6-1')).to eq '東齢4-6-1'
        expect(described_class.call('勞3-1-3')).to eq '労3-1-3'
        expect(described_class.call('壓6-17-9')).to eq '圧6-17-9'
        expect(described_class.call('東爲5-5-12')).to eq '東為5-5-12'
        expect(described_class.call('南隱3-20-19')).to eq '南隠3-20-19'
        expect(described_class.call('東衞2-19-7')).to eq '東衛2-19-7'
        expect(described_class.call('鹽4-14-16')).to eq '塩4-14-16'
        expect(described_class.call('南毆3-12-15')).to eq '南殴3-12-15'
        expect(described_class.call('南穩6-18-7')).to eq '南穏6-18-7'
        expect(described_class.call('西畫4-10-4')).to eq '西画4-10-4'
        expect(described_class.call('壞3-12-16')).to eq '壊3-12-16'
        expect(described_class.call('南殼1-15-11')).to eq '南殻1-15-11'
        expect(described_class.call('東嶽6-7-1')).to eq '東岳6-7-1'
        expect(described_class.call('南卷5-1-5')).to eq '南巻5-1-5'
        expect(described_class.call('東關2-7-4')).to eq '東関2-7-4'
        expect(described_class.call('顏4-6-6')).to eq '顔4-6-6'
        expect(described_class.call('南僞3-8-6')).to eq '南偽3-8-6'
        expect(described_class.call('舊1-5-10')).to eq '旧1-5-10'
        expect(described_class.call('峽6-19-6')).to eq '峡6-19-6'
        expect(described_class.call('東曉4-3-14')).to eq '東暁4-3-14'
        expect(described_class.call('南勳4-11-11')).to eq '南勲4-11-11'
        expect(described_class.call('東惠1-6-7')).to eq '東恵1-6-7'
        expect(described_class.call('螢4-4-16')).to eq '蛍4-4-16'
        expect(described_class.call('西鷄1-16-4')).to eq '西鶏1-16-4'
        expect(described_class.call('北縣3-2-18')).to eq '北県3-2-18'
        expect(described_class.call('東險6-8-13')).to eq '東険6-8-13'
        expect(described_class.call('西獻3-17-18')).to eq '西献3-17-18'
        expect(described_class.call('東驗5-8-5')).to eq '東験5-8-5'
        expect(described_class.call('東效4-8-11')).to eq '東効4-8-11'
        expect(described_class.call('號6-13-18')).to eq '号6-13-18'
        expect(described_class.call('西濟1-13-4')).to eq '西済1-13-4'
        expect(described_class.call('北册2-2-6')).to eq '北冊2-2-6'
        expect(described_class.call('北棧4-5-16')).to eq '北桟4-5-16'
        expect(described_class.call('南贊1-15-11')).to eq '南賛1-15-11'
        expect(described_class.call('南齒1-9-20')).to eq '南歯1-9-20'
        expect(described_class.call('濕2-15-15')).to eq '湿2-15-15'
        expect(described_class.call('北寫1-5-3')).to eq '北写1-5-3'
        expect(described_class.call('收4-11-14')).to eq '収4-11-14'
        expect(described_class.call('南獸3-3-2')).to eq '南獣3-3-2'
        expect(described_class.call('北處4-3-11')).to eq '北処4-3-11'
        expect(described_class.call('東稱2-10-12')).to eq '東称2-10-12'
        expect(described_class.call('北奬4-14-11')).to eq '北奨4-14-11'
        expect(described_class.call('東淨3-3-14')).to eq '東浄3-3-14'
        expect(described_class.call('北繩6-8-9')).to eq '北縄6-8-9'
        expect(described_class.call('南讓5-3-5')).to eq '南譲5-3-5'
        expect(described_class.call('東囑4-7-6')).to eq '東嘱4-7-6'
        expect(described_class.call('北愼4-7-20')).to eq '北慎4-7-20'
        expect(described_class.call('南粹1-9-10')).to eq '南粋1-9-10'
        expect(described_class.call('北隨2-10-2')).to eq '北随2-10-2'
        expect(described_class.call('南數3-4-20')).to eq '南数3-4-20'
        expect(described_class.call('西靜1-20-20')).to eq '西静1-20-20'
        expect(described_class.call('北專6-14-18')).to eq '北専6-14-18'
        expect(described_class.call('北踐5-1-11')).to eq '北践5-1-11'
        expect(described_class.call('北纖1-5-18')).to eq '北繊1-5-18'
        expect(described_class.call('壯5-2-9')).to eq '壮5-2-9'
        expect(described_class.call('搜3-15-6')).to eq '捜3-15-6'
        expect(described_class.call('東總6-3-12')).to eq '東総6-3-12'
        expect(described_class.call('南臟5-14-20')).to eq '南臓5-14-20'
        expect(described_class.call('西墮1-12-12')).to eq '西堕1-12-12'
        expect(described_class.call('北帶3-7-5')).to eq '北帯3-7-5'
        expect(described_class.call('西瀧3-15-6')).to eq '西滝3-15-6'
        expect(described_class.call('西擔2-3-9')).to eq '西担2-3-9'
        expect(described_class.call('東團3-2-8')).to eq '東団3-2-8'
        expect(described_class.call('西遲2-9-3')).to eq '西遅2-9-3'
        expect(described_class.call('北晝5-9-8')).to eq '北昼5-9-8'
        expect(described_class.call('南聽1-12-10')).to eq '南聴1-12-10'
        expect(described_class.call('東遞5-10-12')).to eq '東逓5-10-12'
        expect(described_class.call('西轉2-9-6')).to eq '西転2-9-6'
        expect(described_class.call('東當4-19-13')).to eq '東当4-19-13'
        expect(described_class.call('東稻2-8-1')).to eq '東稲2-8-1'
        expect(described_class.call('讀5-2-15')).to eq '読5-2-15'
        expect(described_class.call('北惱4-9-7')).to eq '北悩4-9-7'
        expect(described_class.call('西拜5-18-17')).to eq '西拝5-18-17'
        expect(described_class.call('東麥6-14-15')).to eq '東麦6-14-15'
        expect(described_class.call('南拔6-2-20')).to eq '南抜6-2-20'
        expect(described_class.call('東濱5-20-9')).to eq '東浜5-20-9'
        expect(described_class.call('南竝6-19-14')).to eq '南並6-19-14'
        expect(described_class.call('南辨4-5-11')).to eq '南弁4-5-11'
        expect(described_class.call('西舖6-15-12')).to eq '西舗6-15-12'
        expect(described_class.call('東襃4-8-3')).to eq '東褒4-8-3'
        expect(described_class.call('南萬4-14-18')).to eq '南万4-14-18'
        expect(described_class.call('譯6-2-1')).to eq '訳6-2-1'
        expect(described_class.call('西豫6-18-20')).to eq '西予6-18-20'
        expect(described_class.call('搖6-17-14')).to eq '揺6-17-14'
        expect(described_class.call('西來2-17-1')).to eq '西来2-17-1'
        expect(described_class.call('南龍6-9-14')).to eq '南竜6-9-14'
        expect(described_class.call('東壘1-16-14')).to eq '東塁1-16-14'
        expect(described_class.call('南隸5-11-5')).to eq '南隷5-11-5'
        expect(described_class.call('東戀3-12-7')).to eq '東恋3-12-7'
        expect(described_class.call('北樓1-8-9')).to eq '北楼1-8-9'
        expect(described_class.call('北鰺2-11-8')).to eq '北鯵2-11-8'
        expect(described_class.call('南鶯6-12-10')).to eq '南鴬6-12-10'
        expect(described_class.call('蠣5-16-12')).to eq '蛎5-16-12'
        expect(described_class.call('東攪2-4-13')).to eq '東撹2-4-13'
        expect(described_class.call('西竈6-16-6')).to eq '西竃6-16-6'
        expect(described_class.call('西灌2-3-19')).to eq '西潅2-3-19'
        expect(described_class.call('南諫2-8-15')).to eq '南諌2-8-15'
        expect(described_class.call('南頸4-1-18')).to eq '南頚4-1-18'
        expect(described_class.call('礦3-5-3')).to eq '砿3-5-3'
        expect(described_class.call('南蘂6-12-6')).to eq '南蕊6-12-6'
        expect(described_class.call('南靱5-13-13')).to eq '南靭5-13-13'
        expect(described_class.call('南賤2-12-5')).to eq '南賎2-12-5'
        expect(described_class.call('北壺1-20-5')).to eq '北壷1-20-5'
        expect(described_class.call('東礪3-11-8')).to eq '東砺3-11-8'
        expect(described_class.call('西檮1-7-7')).to eq '西梼1-7-7'
        expect(described_class.call('南濤1-14-10')).to eq '南涛1-14-10'
        expect(described_class.call('西邇3-5-2')).to eq '西迩3-5-2'
        expect(described_class.call('南蠅3-5-15')).to eq '南蝿3-5-15'
        expect(described_class.call('南檜6-7-9')).to eq '南桧6-7-9'
        expect(described_class.call('西儘4-19-13')).to eq '西侭4-19-13'
        expect(described_class.call('北藪6-15-15')).to eq '北薮6-15-15'
        expect(described_class.call('北籠5-3-1')).to eq '北篭5-3-1'
      end
    end

    context '全角英数字が含まれるとき' do
      it '半角英数字に置き換える' do
        expect(described_class.call('東京都港区芝公園４-２-８')).to eq '東京都港区芝公園4-2-8'
      end
    end

    context '長音が含まれるとき' do
      it 'ハイフンに置き換える' do
        expect(described_class.call('東京都港区芝公園4ー2ー8')).to eq '東京都港区芝公園4-2-8'
      end
    end

    context '「3条」のような地名を含むとき' do
      it '英数字を漢数字に置き換えたあと丁目に変換する' do
        expect(described_class.call('北海道札幌市中央区北3条西6-1')).to eq '北海道札幌市中央区北三条西6-1'
        expect(described_class.call('東京都港区芝公園4丁目2-8')).to eq '東京都港区芝公園四丁目2-8'
      end
    end
  end
end
