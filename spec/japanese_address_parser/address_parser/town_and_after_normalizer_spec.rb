# frozen_string_literal: true

require_relative '../../../lib/japanese_address_parser/address_parser/town_and_after_normalizer'

::RSpec.describe ::JapaneseAddressParser::AddressParser::TownAndAfterNormalizer do
  describe '.call' do
    context '旧字体を含むとき' do
      it '新字体に置き換える' do
        # テスト駆動の実装をしやすくするために、本体とは旧・新字体の定義を分けておく。
        expect(described_class.call('北亞4-14-17')).to eq '北亜四丁目'
        expect(described_class.call('南圍4-15-18')).to eq '南囲四丁目'
        expect(described_class.call('西壹6-16-16')).to eq '西壱六丁目'
        expect(described_class.call('北榮4-16-6')).to eq '北栄四丁目'
        expect(described_class.call('東驛1-3-4')).to eq '東駅一丁目'
        expect(described_class.call('西應3-19-2')).to eq '西応三丁目'
        expect(described_class.call('南櫻4-14-5')).to eq '南桜四丁目'
        expect(described_class.call('假3-10-16')).to eq '仮三丁目'
        expect(described_class.call('東會2-3-3')).to eq '東会二丁目'
        expect(described_class.call('東懷4-12-20')).to eq '東懐四丁目'
        expect(described_class.call('西覺4-9-10')).to eq '西覚四丁目'
        expect(described_class.call('東樂1-11-19')).to eq '東楽一丁目'
        expect(described_class.call('北陷2-11-8')).to eq '北陥二丁目'
        expect(described_class.call('東歡4-12-2')).to eq '東歓四丁目'
        expect(described_class.call('氣5-2-9')).to eq '気五丁目'
        expect(described_class.call('北戲1-15-14')).to eq '北戯一丁目'
        expect(described_class.call('東據4-8-10')).to eq '東拠四丁目'
        expect(described_class.call('北挾1-9-15')).to eq '北挟一丁目'
        expect(described_class.call('東區5-3-10')).to eq '東区五丁目'
        expect(described_class.call('東徑4-4-6')).to eq '東径四丁目'
        expect(described_class.call('西溪2-14-13')).to eq '西渓二丁目'
        expect(described_class.call('南輕6-11-14')).to eq '南軽六丁目'
        expect(described_class.call('藝2-10-14')).to eq '芸二丁目'
        expect(described_class.call('西儉2-1-2')).to eq '西倹二丁目'
        expect(described_class.call('東圈5-8-18')).to eq '東圏五丁目'
        expect(described_class.call('東權4-19-5')).to eq '東権四丁目'
        expect(described_class.call('西嚴3-16-5')).to eq '西厳三丁目'
        expect(described_class.call('北恆5-5-12')).to eq '北恒五丁目'
        expect(described_class.call('北國2-19-9')).to eq '北国二丁目'
        expect(described_class.call('南齋5-1-5')).to eq '南斎五丁目'
        expect(described_class.call('北雜2-3-18')).to eq '北雑二丁目'
        expect(described_class.call('蠶3-20-5')).to eq '蚕三丁目'
        expect(described_class.call('北殘2-19-5')).to eq '北残二丁目'
        expect(described_class.call('東兒3-1-12')).to eq '東児三丁目'
        expect(described_class.call('北實3-2-15')).to eq '北実三丁目'
        expect(described_class.call('東釋4-8-3')).to eq '東釈四丁目'
        expect(described_class.call('南從6-6-10')).to eq '南従六丁目'
        expect(described_class.call('縱4-20-9')).to eq '縦四丁目'
        expect(described_class.call('西敍2-8-15')).to eq '西叙二丁目'
        expect(described_class.call('西燒6-9-2')).to eq '西焼六丁目'
        expect(described_class.call('西條6-14-3')).to eq '西条六丁目'
        expect(described_class.call('西剩1-16-16')).to eq '西剰一丁目'
        expect(described_class.call('東壤3-18-6')).to eq '東壌三丁目'
        expect(described_class.call('釀6-2-16')).to eq '醸六丁目'
        expect(described_class.call('東眞5-17-7')).to eq '東真五丁目'
        expect(described_class.call('南盡2-3-14')).to eq '南尽二丁目'
        expect(described_class.call('東醉1-3-3')).to eq '東酔一丁目'
        expect(described_class.call('西髓6-16-6')).to eq '西髄六丁目'
        expect(described_class.call('聲6-2-11')).to eq '声六丁目'
        expect(described_class.call('竊6-19-6')).to eq '窃六丁目'
        expect(described_class.call('淺5-5-8')).to eq '浅五丁目'
        expect(described_class.call('南錢2-1-8')).to eq '南銭二丁目'
        expect(described_class.call('禪4-6-4')).to eq '禅四丁目'
        expect(described_class.call('北爭1-14-11')).to eq '北争一丁目'
        expect(described_class.call('東插6-9-18')).to eq '東挿六丁目'
        expect(described_class.call('騷6-15-18')).to eq '騒六丁目'
        expect(described_class.call('屬2-16-14')).to eq '属二丁目'
        expect(described_class.call('西對4-18-19')).to eq '西対四丁目'
        expect(described_class.call('西滯1-15-6')).to eq '西滞一丁目'
        expect(described_class.call('東擇1-17-5')).to eq '東択一丁目'
        expect(described_class.call('單6-1-10')).to eq '単六丁目'
        expect(described_class.call('斷4-5-18')).to eq '断四丁目'
        expect(described_class.call('西癡6-18-6')).to eq '西痴六丁目'
        expect(described_class.call('鑄3-3-13')).to eq '鋳三丁目'
        expect(described_class.call('南敕6-18-9')).to eq '南勅六丁目'
        expect(described_class.call('鐵2-3-15')).to eq '鉄二丁目'
        expect(described_class.call('傳1-12-19')).to eq '伝一丁目'
        expect(described_class.call('南黨1-3-13')).to eq '南党一丁目'
        expect(described_class.call('西鬪6-7-16')).to eq '西闘六丁目'
        expect(described_class.call('西屆1-14-15')).to eq '西届一丁目'
        expect(described_class.call('東腦6-7-20')).to eq '東脳六丁目'
        expect(described_class.call('南廢5-2-8')).to eq '南廃五丁目'
        expect(described_class.call('東發6-4-4')).to eq '東発六丁目'
        expect(described_class.call('南蠻6-9-13')).to eq '南蛮六丁目'
        expect(described_class.call('南拂4-12-9')).to eq '南払四丁目'
        expect(described_class.call('西邊2-18-13')).to eq '西辺二丁目'
        expect(described_class.call('西瓣4-15-8')).to eq '西弁四丁目'
        expect(described_class.call('寶2-15-20')).to eq '宝二丁目'
        expect(described_class.call('西沒5-14-12')).to eq '西没五丁目'
        expect(described_class.call('東滿5-10-5')).to eq '東満五丁目'
        expect(described_class.call('藥3-18-4')).to eq '薬三丁目'
        expect(described_class.call('北餘5-8-2')).to eq '北余五丁目'
        expect(described_class.call('西樣3-14-2')).to eq '西様三丁目'
        expect(described_class.call('北亂6-9-1')).to eq '北乱六丁目'
        expect(described_class.call('東兩6-18-3')).to eq '東両六丁目'
        expect(described_class.call('西禮4-5-13')).to eq '西礼四丁目'
        expect(described_class.call('東靈3-14-14')).to eq '東霊三丁目'
        expect(described_class.call('南爐6-5-20')).to eq '南炉六丁目'
        expect(described_class.call('東灣6-3-15')).to eq '東湾六丁目'
        expect(described_class.call('西惡6-9-5')).to eq '西悪六丁目'
        expect(described_class.call('南醫2-16-14')).to eq '南医二丁目'
        expect(described_class.call('南飮3-17-15')).to eq '南飲三丁目'
        expect(described_class.call('北營3-17-16')).to eq '北営三丁目'
        expect(described_class.call('南圓5-20-7')).to eq '南円五丁目'
        expect(described_class.call('北歐1-5-15')).to eq '北欧一丁目'
        expect(described_class.call('北奧1-16-14')).to eq '北奥一丁目'
        expect(described_class.call('西價4-12-2')).to eq '西価四丁目'
        expect(described_class.call('東繪4-3-19')).to eq '東絵四丁目'
        expect(described_class.call('南擴3-3-8')).to eq '南拡三丁目'
        expect(described_class.call('東學6-7-3')).to eq '東学六丁目'
        expect(described_class.call('南罐2-7-17')).to eq '南缶二丁目'
        expect(described_class.call('勸3-2-11')).to eq '勧三丁目'
        expect(described_class.call('觀4-14-18')).to eq '観四丁目'
        expect(described_class.call('歸3-5-14')).to eq '帰三丁目'
        expect(described_class.call('南犧4-4-6')).to eq '南犠四丁目'
        expect(described_class.call('東擧5-14-11')).to eq '東挙五丁目'
        expect(described_class.call('西狹2-4-12')).to eq '西狭二丁目'
        expect(described_class.call('西驅4-14-5')).to eq '西駆四丁目'
        expect(described_class.call('莖4-5-11')).to eq '茎四丁目'
        expect(described_class.call('北經6-13-16')).to eq '北経六丁目'
        expect(described_class.call('東繼2-19-13')).to eq '東継二丁目'
        expect(described_class.call('西缺5-9-12')).to eq '西欠五丁目'
        expect(described_class.call('劍4-8-17')).to eq '剣四丁目'
        expect(described_class.call('南檢6-9-3')).to eq '南検六丁目'
        expect(described_class.call('西顯3-18-16')).to eq '西顕三丁目'
        expect(described_class.call('北廣1-17-16')).to eq '北広一丁目'
        expect(described_class.call('東鑛3-3-10')).to eq '東鉱三丁目'
        expect(described_class.call('東碎6-10-8')).to eq '東砕六丁目'
        expect(described_class.call('北劑3-14-3')).to eq '北剤三丁目'
        expect(described_class.call('南參2-4-15')).to eq '南参二丁目'
        expect(described_class.call('西慘3-17-2')).to eq '西惨三丁目'
        expect(described_class.call('南絲6-15-9')).to eq '南糸六丁目'
        expect(described_class.call('南辭4-18-11')).to eq '南辞四丁目'
        expect(described_class.call('北舍3-7-11')).to eq '北舎三丁目'
        expect(described_class.call('南壽1-7-2')).to eq '南寿一丁目'
        expect(described_class.call('西澁4-16-5')).to eq '西渋四丁目'
        expect(described_class.call('南肅5-4-8')).to eq '南粛五丁目'
        expect(described_class.call('西將5-5-6')).to eq '西将五丁目'
        expect(described_class.call('證3-11-1')).to eq '証三丁目'
        expect(described_class.call('乘3-3-6')).to eq '乗三丁目'
        expect(described_class.call('東疊2-12-15')).to eq '東畳二丁目'
        expect(described_class.call('東孃5-14-14')).to eq '東嬢五丁目'
        expect(described_class.call('觸4-15-7')).to eq '触四丁目'
        expect(described_class.call('寢3-2-10')).to eq '寝三丁目'
        expect(described_class.call('南圖3-17-2')).to eq '南図三丁目'
        expect(described_class.call('南穗5-10-11')).to eq '南穂五丁目'
        expect(described_class.call('東樞3-18-20')).to eq '東枢三丁目'
        expect(described_class.call('西齊4-9-5')).to eq '西斉四丁目'
        expect(described_class.call('南攝1-18-11')).to eq '南摂一丁目'
        expect(described_class.call('西戰6-4-20')).to eq '西戦六丁目'
        expect(described_class.call('北潛3-1-1')).to eq '北潜三丁目'
        expect(described_class.call('東雙6-9-5')).to eq '東双六丁目'
        expect(described_class.call('南莊5-11-8')).to eq '南荘五丁目'
        expect(described_class.call('裝6-12-7')).to eq '装六丁目'
        expect(described_class.call('北藏6-5-8')).to eq '北蔵六丁目'
        expect(described_class.call('北續2-18-7')).to eq '北続二丁目'
        expect(described_class.call('北體6-1-4')).to eq '北体六丁目'
        expect(described_class.call('西臺5-12-8')).to eq '西台五丁目'
        expect(described_class.call('南澤4-9-14')).to eq '南沢四丁目'
        expect(described_class.call('西膽1-7-13')).to eq '西胆一丁目'
        expect(described_class.call('北彈4-17-14')).to eq '北弾四丁目'
        expect(described_class.call('北蟲6-6-19')).to eq '北虫六丁目'
        expect(described_class.call('廳2-5-8')).to eq '庁二丁目'
        expect(described_class.call('東鎭1-19-7')).to eq '東鎮一丁目'
        expect(described_class.call('東點2-4-13')).to eq '東点二丁目'
        expect(described_class.call('東燈2-2-12')).to eq '東灯二丁目'
        expect(described_class.call('南盜6-17-8')).to eq '南盗六丁目'
        expect(described_class.call('東獨2-1-7')).to eq '東独二丁目'
        expect(described_class.call('東貳1-17-16')).to eq '東弐一丁目'
        expect(described_class.call('東霸3-11-13')).to eq '東覇三丁目'
        expect(described_class.call('北賣1-6-14')).to eq '北売一丁目'
        expect(described_class.call('東髮2-13-2')).to eq '東髪二丁目'
        expect(described_class.call('祕4-2-4')).to eq '秘四丁目'
        expect(described_class.call('佛6-8-15')).to eq '仏六丁目'
        expect(described_class.call('變3-5-20')).to eq '変三丁目'
        expect(described_class.call('西辯6-7-2')).to eq '西弁六丁目'
        expect(described_class.call('豐3-5-17')).to eq '豊三丁目'
        expect(described_class.call('北飜1-4-15')).to eq '北翻一丁目'
        expect(described_class.call('南默2-10-14')).to eq '南黙二丁目'
        expect(described_class.call('西與4-2-17')).to eq '西与四丁目'
        expect(described_class.call('北譽4-18-8')).to eq '北誉四丁目'
        expect(described_class.call('西謠1-5-20')).to eq '西謡一丁目'
        expect(described_class.call('覽6-20-2')).to eq '覧六丁目'
        expect(described_class.call('獵5-10-3')).to eq '猟五丁目'
        expect(described_class.call('東勵5-9-8')).to eq '東励五丁目'
        expect(described_class.call('東齡4-6-1')).to eq '東齢四丁目'
        expect(described_class.call('勞3-1-3')).to eq '労三丁目'
        expect(described_class.call('壓6-17-9')).to eq '圧六丁目'
        expect(described_class.call('東爲5-5-12')).to eq '東為五丁目'
        expect(described_class.call('南隱3-20-19')).to eq '南隠三丁目'
        expect(described_class.call('東衞2-19-7')).to eq '東衛二丁目'
        expect(described_class.call('鹽4-14-16')).to eq '塩四丁目'
        expect(described_class.call('南毆3-12-15')).to eq '南殴三丁目'
        expect(described_class.call('南穩6-18-7')).to eq '南穏六丁目'
        expect(described_class.call('西畫4-10-4')).to eq '西画四丁目'
        expect(described_class.call('壞3-12-16')).to eq '壊三丁目'
        expect(described_class.call('南殼1-15-11')).to eq '南殻一丁目'
        expect(described_class.call('東嶽6-7-1')).to eq '東岳六丁目'
        expect(described_class.call('南卷5-1-5')).to eq '南巻五丁目'
        expect(described_class.call('東關2-7-4')).to eq '東関二丁目'
        expect(described_class.call('顏4-6-6')).to eq '顔四丁目'
        expect(described_class.call('南僞3-8-6')).to eq '南偽三丁目'
        expect(described_class.call('舊1-5-10')).to eq '旧一丁目'
        expect(described_class.call('峽6-19-6')).to eq '峡六丁目'
        expect(described_class.call('東曉4-3-14')).to eq '東暁四丁目'
        expect(described_class.call('南勳4-11-11')).to eq '南勲四丁目'
        expect(described_class.call('東惠1-6-7')).to eq '東恵一丁目'
        expect(described_class.call('螢4-4-16')).to eq '蛍四丁目'
        expect(described_class.call('西鷄1-16-4')).to eq '西鶏一丁目'
        expect(described_class.call('北縣3-2-18')).to eq '北県三丁目'
        expect(described_class.call('東險6-8-13')).to eq '東険六丁目'
        expect(described_class.call('西獻3-17-18')).to eq '西献三丁目'
        expect(described_class.call('東驗5-8-5')).to eq '東験五丁目'
        expect(described_class.call('東效4-8-11')).to eq '東効四丁目'
        expect(described_class.call('號6-13-18')).to eq '号六丁目'
        expect(described_class.call('西濟1-13-4')).to eq '西済一丁目'
        expect(described_class.call('北册2-2-6')).to eq '北冊二丁目'
        expect(described_class.call('北棧4-5-16')).to eq '北桟四丁目'
        expect(described_class.call('南贊1-15-11')).to eq '南賛一丁目'
        expect(described_class.call('南齒1-9-20')).to eq '南歯一丁目'
        expect(described_class.call('濕2-15-15')).to eq '湿二丁目'
        expect(described_class.call('北寫1-5-3')).to eq '北写一丁目'
        expect(described_class.call('收4-11-14')).to eq '収四丁目'
        expect(described_class.call('南獸3-3-2')).to eq '南獣三丁目'
        expect(described_class.call('北處4-3-11')).to eq '北処四丁目'
        expect(described_class.call('東稱2-10-12')).to eq '東称二丁目'
        expect(described_class.call('北奬4-14-11')).to eq '北奨四丁目'
        expect(described_class.call('東淨3-3-14')).to eq '東浄三丁目'
        expect(described_class.call('北繩6-8-9')).to eq '北縄六丁目'
        expect(described_class.call('南讓5-3-5')).to eq '南譲五丁目'
        expect(described_class.call('東囑4-7-6')).to eq '東嘱四丁目'
        expect(described_class.call('北愼4-7-20')).to eq '北慎四丁目'
        expect(described_class.call('南粹1-9-10')).to eq '南粋一丁目'
        expect(described_class.call('北隨2-10-2')).to eq '北随二丁目'
        expect(described_class.call('南數3-4-20')).to eq '南数三丁目'
        expect(described_class.call('西靜1-20-20')).to eq '西静一丁目'
        expect(described_class.call('北專6-14-18')).to eq '北専六丁目'
        expect(described_class.call('北踐5-1-11')).to eq '北践五丁目'
        expect(described_class.call('北纖1-5-18')).to eq '北繊一丁目'
        expect(described_class.call('壯5-2-9')).to eq '壮五丁目'
        expect(described_class.call('搜3-15-6')).to eq '捜三丁目'
        expect(described_class.call('東總6-3-12')).to eq '東総六丁目'
        expect(described_class.call('南臟5-14-20')).to eq '南臓五丁目'
        expect(described_class.call('西墮1-12-12')).to eq '西堕一丁目'
        expect(described_class.call('北帶3-7-5')).to eq '北帯三丁目'
        expect(described_class.call('西瀧3-15-6')).to eq '西滝三丁目'
        expect(described_class.call('西擔2-3-9')).to eq '西担二丁目'
        expect(described_class.call('東團3-2-8')).to eq '東団三丁目'
        expect(described_class.call('西遲2-9-3')).to eq '西遅二丁目'
        expect(described_class.call('北晝5-9-8')).to eq '北昼五丁目'
        expect(described_class.call('南聽1-12-10')).to eq '南聴一丁目'
        expect(described_class.call('東遞5-10-12')).to eq '東逓五丁目'
        expect(described_class.call('西轉2-9-6')).to eq '西転二丁目'
        expect(described_class.call('東當4-19-13')).to eq '東当四丁目'
        expect(described_class.call('東稻2-8-1')).to eq '東稲二丁目'
        expect(described_class.call('讀5-2-15')).to eq '読五丁目'
        expect(described_class.call('北惱4-9-7')).to eq '北悩四丁目'
        expect(described_class.call('西拜5-18-17')).to eq '西拝五丁目'
        expect(described_class.call('東麥6-14-15')).to eq '東麦六丁目'
        expect(described_class.call('南拔6-2-20')).to eq '南抜六丁目'
        expect(described_class.call('東濱5-20-9')).to eq '東浜五丁目'
        expect(described_class.call('南竝6-19-14')).to eq '南並六丁目'
        expect(described_class.call('南辨4-5-11')).to eq '南弁四丁目'
        expect(described_class.call('西舖6-15-12')).to eq '西舗六丁目'
        expect(described_class.call('東襃4-8-3')).to eq '東褒四丁目'
        expect(described_class.call('南萬4-14-18')).to eq '南万四丁目'
        expect(described_class.call('譯6-2-1')).to eq '訳六丁目'
        expect(described_class.call('西豫6-18-20')).to eq '西予六丁目'
        expect(described_class.call('搖6-17-14')).to eq '揺六丁目'
        expect(described_class.call('西來2-17-1')).to eq '西来二丁目'
        expect(described_class.call('南龍6-9-14')).to eq '南竜六丁目'
        expect(described_class.call('東壘1-16-14')).to eq '東塁一丁目'
        expect(described_class.call('南隸5-11-5')).to eq '南隷五丁目'
        expect(described_class.call('東戀3-12-7')).to eq '東恋三丁目'
        expect(described_class.call('北樓1-8-9')).to eq '北楼一丁目'
        expect(described_class.call('北鰺2-11-8')).to eq '北鯵二丁目'
        expect(described_class.call('南鶯6-12-10')).to eq '南鴬六丁目'
        expect(described_class.call('蠣5-16-12')).to eq '蛎五丁目'
        expect(described_class.call('東攪2-4-13')).to eq '東撹二丁目'
        expect(described_class.call('西竈6-16-6')).to eq '西竃六丁目'
        expect(described_class.call('西灌2-3-19')).to eq '西潅二丁目'
        expect(described_class.call('南諫2-8-15')).to eq '南諌二丁目'
        expect(described_class.call('南頸4-1-18')).to eq '南頚四丁目'
        expect(described_class.call('礦3-5-3')).to eq '砿三丁目'
        expect(described_class.call('南蘂6-12-6')).to eq '南蕊六丁目'
        expect(described_class.call('南靱5-13-13')).to eq '南靭五丁目'
        expect(described_class.call('南賤2-12-5')).to eq '南賎二丁目'
        expect(described_class.call('北壺1-20-5')).to eq '北壷一丁目'
        expect(described_class.call('東礪3-11-8')).to eq '東砺三丁目'
        expect(described_class.call('西檮1-7-7')).to eq '西梼一丁目'
        expect(described_class.call('南濤1-14-10')).to eq '南涛一丁目'
        expect(described_class.call('西邇3-5-2')).to eq '西迩三丁目'
        expect(described_class.call('南蠅3-5-15')).to eq '南蝿三丁目'
        expect(described_class.call('南檜6-7-9')).to eq '南桧六丁目'
        expect(described_class.call('西儘4-19-13')).to eq '西侭四丁目'
        expect(described_class.call('北藪6-15-15')).to eq '北薮六丁目'
        expect(described_class.call('北籠5-3-1')).to eq '北篭五丁目'
      end
    end

    context '全角英数字が含まれるとき' do
      it '半角英数字に置き換えたあと丁目に変換する' do
        expect(described_class.call('東京都港区芝公園４-２-８')).to eq '東京都港区芝公園四丁目'
      end
    end

    context '長音が含まれるとき' do
      it 'ハイフンに置き換えたあと丁目に変換する' do
        expect(described_class.call('東京都港区芝公園4ー2ー8')).to eq '東京都港区芝公園四丁目'
      end
    end

    context '「3条」のような地名を含むとき' do
      it '英数字を漢数字に置き換えたあと丁目に変換する' do
        expect(described_class.call('北海道札幌市中央区北3条西6-1')).to eq '北海道札幌市中央区北三条西六丁目'
      end
    end

    context '英数字+「丁目」という表記のとき' do
      it 'ハイフンに置き換えたあと丁目に変換する' do
        expect(described_class.call('東京都港区芝公園4丁目2-8')).to eq '東京都港区芝公園四丁目'
      end
    end

    context '1-2-3のような表記のとき' do
      it '丁目に変換する' do
        expect(described_class.call('東京都港区芝公園4-2-8')).to eq '東京都港区芝公園四丁目'
      end
    end
  end
end
